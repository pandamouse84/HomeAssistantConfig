# <summary>
# This YAML configuration contains
# the automation for updating the alarm clock on the IPad.
# </summary>
# <remarks>
# =========================================================================
# Date         Author        Comment
# 2024-08-07   FZE           Initial release
# =========================================================================
# </remarks>

- alias: "Wecker: IPad aktualisieren"
  id: alarm_clock_update_ipad
  mode: single
  max_exceeded: silent
  trigger:
    - platform: state
      entity_id:
        - input_datetime.alarm_clock_time
        - input_boolean.alarm_clock_enabled
  action:
    - service: notify.mobile_app_ipad_von_florian
      data:
        message: "Wecker wird aktuallisiert."
        data:
          shortcut:
          name: "Wecker stellen IPad"
          enable: "{{- state(input_boolean.alarm_clock_enabled) -}}"
          time: "{{- state(input_datetime.alarm_clock_time) -}}"
    - service: notify.mobile_app_ipad_von_florian
      data:
        message: "clear_notification"
        data:
          tag: "ha_set_alarm_clock"